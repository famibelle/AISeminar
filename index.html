<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>AI Seminar for Automotive Experts</title>
		<link rel="icon" type="image/svg+xml" href="favicon.svg">

		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/dist/reset.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/dist/reveal.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/dist/theme/black.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/plugin/highlight/monokai.css">
		<style>
			.smaller {
				font-size: 0.7em;
    				line-height: 1.4;
    				word-wrap: break-word;
  			}
		</style>
		<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
		<style>
		.reveal .slides section {
			text-align: left;
			overflow: hidden; /* Cache les d√©bordements au lieu de les faire d√©filer */
			display: flex;
			flex-direction: column;
			justify-content: flex-start;
			height: 100%;
			box-sizing: border-box;
		}
		.reveal p,
		.reveal ul,
		.reveal ol,
		.reveal h1,
		.reveal h2,
		.reveal h3 {
			text-align: left;
		}
		/* √âvite les conflits entre highlight.js et mermaid */
		.mermaid {
			all: unset;
			display: block;
		}
		
		/* Bouton de basculement de th√®me */
		.theme-toggle {
			position: fixed;
			top: 20px;
			right: 20px;
			z-index: 1000;
			background: rgba(0, 0, 0, 0.7);
			color: white;
			border: 2px solid #ccc;
			border-radius: 25px;
			padding: 10px 15px;
			cursor: pointer;
			font-size: 14px;
			transition: all 0.3s ease;
		}
		
		.theme-toggle:hover {
			background: rgba(0, 0, 0, 0.9);
			transform: scale(1.05);
		}
		
		/* Styles pour le mode clair */
		.reveal.light-theme {
			background: white;
			color: #333;
		}
		
		.reveal.light-theme .slides section {
			color: #333;
		}
		
		.reveal.light-theme h1,
		.reveal.light-theme h2,
		.reveal.light-theme h3,
		.reveal.light-theme h4,
		.reveal.light-theme h5,
		.reveal.light-theme h6 {
			color: #333;
		}
		
		.reveal.light-theme .theme-toggle {
			background: rgba(255, 255, 255, 0.9);
			color: #333;
			border-color: #333;
		}
		
		.reveal.light-theme .theme-toggle:hover {
			background: rgba(255, 255, 255, 1);
		}
		</style>

	</head>
	<body>
		<!-- Bouton de basculement de th√®me -->
		<button class="theme-toggle" onclick="toggleTheme()">üåì</button>
		
		<div class="reveal">
			<div class="slides">
			  <section class="smaller" data-markdown="ai_seminar_slides.md"
					   data-separator="^---$"
					   data-separator-vertical="^--$"
					   data-charset="utf-8">
			  </section>
			</div>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/dist/reveal.min.js"></script>
		<script>
		  // Fonction pour ajuster dynamiquement la taille du texte pour qu'il s'adapte au slide
		  function adjustFontSize() {
		    document.querySelectorAll('.slides section').forEach(slide => {
		      let fontSize = 100; // Commence √† 100%
		      slide.style.fontSize = fontSize + '%';
		      
		      // R√©duit la taille jusqu'√† ce que le contenu s'ajuste compl√®tement
		      while (slide.scrollHeight > slide.clientHeight && fontSize > 10) {
		        fontSize -= 2;
		        slide.style.fontSize = fontSize + '%';
		      }
		    });
		  }
		  
		  // Fonction pour basculer entre les th√®mes
		  function toggleTheme() {
		    const reveal = document.querySelector('.reveal');
		    const isLightTheme = reveal.classList.contains('light-theme');
		    
		    if (isLightTheme) {
		      // Passer au mode sombre
		      reveal.classList.remove('light-theme');
		      localStorage.setItem('reveal-theme', 'dark');
		      updateMermaidTheme('dark');
		    } else {
		      // Passer au mode clair
		      reveal.classList.add('light-theme');
		      localStorage.setItem('reveal-theme', 'light');
		      updateMermaidTheme('light');
		    }
		  }
		  
		  // Stockage global pour les d√©finitions Mermaid originales
		  let mermaidDefinitions = new Map();
		  
		  // Fonction pour mettre √† jour le th√®me Mermaid
		  function updateMermaidTheme(theme) {
		    // Ne pas essayer de re-rendre si aucun diagramme n'existe
		    const mermaidElements = document.querySelectorAll('.mermaid');
		    if (mermaidElements.length === 0) return;
		    
		    // Configuration du th√®me
		    const mermaidConfig = {
		      startOnLoad: false,
		      logLevel: 'error', // R√©duire les logs pour √©viter le spam
		      securityLevel: 'loose',
		      suppressErrors: true, // Supprimer les erreurs de rendu
		      flowchart: { 
		        htmlLabels: false,
		        useMaxWidth: true,
		        curve: 'linear'
		      },
		      er: {
		        useMaxWidth: true
		      },
		      gitgraph: {
		        useMaxWidth: true
		      }
		    };
		    
		    if (theme === 'light') {
		      mermaidConfig.theme = 'default';
		      mermaidConfig.themeVariables = {
		        primaryColor: '#333333',
		        primaryTextColor: '#333333',
		        primaryBorderColor: '#333333',
		        lineColor: '#333333'
		      };
		    } else {
		      mermaidConfig.theme = 'dark';
		      mermaidConfig.themeVariables = {
		        primaryColor: '#ffffff',
		        primaryTextColor: '#ffffff',
		        primaryBorderColor: '#ffffff',
		        lineColor: '#ffffff'
		      };
		    }
		    
		    // R√©initialiser Mermaid avec la nouvelle configuration
		    mermaid.initialize(mermaidConfig);
		    
		    // Re-rendre chaque diagramme individuellement
		    mermaidElements.forEach((element, index) => {
		      const originalDefinition = mermaidDefinitions.get(element.id);
		      if (originalDefinition) {
		        // Nettoyer l'√©l√©ment
		        element.innerHTML = '';
		        element.removeAttribute('data-processed');
		        
		        // Re-cr√©er le contenu
		        element.textContent = originalDefinition;
		        
		        // Re-rendre avec un d√©lai pour √©viter les conflits
		        setTimeout(() => {
		          try {
		            mermaid.run({nodes: document.querySelectorAll(`#${element.id}`), suppressErrors: true});
		          } catch (error) {
		            console.warn('Erreur lors du re-rendu Mermaid:', error);
		            // En cas d'erreur, restaurer le texte original
		            element.textContent = originalDefinition;
		            element.style.whiteSpace = 'pre';
		            element.style.fontFamily = 'monospace';
		          }
		        }, index * 50); // D√©lai progressif pour chaque diagramme
		      }
		    });
		    
		    // Re-rendre MathJax apr√®s le changement de th√®me
		    setTimeout(() => {
		      if (window.MathJax) {
		        MathJax.typesetPromise();
		      }
		    }, (mermaidElements.length * 50) + 200);
		  }
		  
		  // Restaurer le th√®me sauvegard√© au chargement
		  function restoreTheme() {
		    const savedTheme = localStorage.getItem('reveal-theme') || 'dark';
		    const reveal = document.querySelector('.reveal');
		    
		    if (savedTheme === 'light') {
		      reveal.classList.add('light-theme');
		    }
		  }
		  
		  document.querySelectorAll('.slides section').forEach(slide => {
		    slide.classList.add('smaller');
		  });
		  
		  // Ajuste au chargement et lors du redimensionnement
		  window.addEventListener('resize', adjustFontSize);
		  
		  // Restaurer le th√®me au chargement de la page
		  document.addEventListener('DOMContentLoaded', restoreTheme);
		</script>
		<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/plugin/notes/notes.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/plugin/markdown/markdown.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/plugin/highlight/highlight.js"></script>
		<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
<script>
  // Configuration de MathJax pour d√©tecter les √©quations LaTeX
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      ignoreHtmlClass: 'tex2jax_ignore',
      processHtmlClass: 'tex2jax_process'
    },
    startup: {
      ready: () => {
        console.log('MathJax is loaded, but not yet initialized');
        MathJax.startup.defaultReady();
        console.log('MathJax is initialized, and the initial typeset is queued');
      }
    }
  };
</script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
				width: "100%",
				height: "100%",
				margin: 0.05, // Marges r√©duites pour plus d'espace
				minScale: 0.1, // √âchelle minimale plus petite
				maxScale: 1.0, // √âchelle maximale limit√©e
				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
			
			// Configuration de Mermaid apr√®s l'initialisation de Reveal
			mermaid.initialize({
				startOnLoad: false, // D√©sactiv√© pour √©viter les conflits
				theme: 'dark', // Correspond au th√®me noir de Reveal.js
				logLevel: 'error', // R√©duire les logs pour √©viter les warnings
				securityLevel: 'loose', // Permet plus de flexibilit√©
				suppressErrors: true, // Supprimer les erreurs de rendu non critiques
				flowchart: { 
					htmlLabels: false,
					useMaxWidth: true,
					curve: 'linear' // Utiliser des courbes simples
				},
				er: {
					useMaxWidth: true
				},
				gitgraph: {
					useMaxWidth: true
				},
				themeVariables: {
					primaryColor: '#ffffff',
					primaryTextColor: '#ffffff',
					primaryBorderColor: '#ffffff',
					lineColor: '#ffffff'
				}
			});
			
			// Fonction pour traiter les diagrammes Mermaid
			function processMermaidDiagrams() {
				// Cherche diff√©rents s√©lecteurs possibles pour les blocs Mermaid
				const selectors = [
					'code.language-mermaid',
					'code[class*="mermaid"]',
					'pre code.language-mermaid',
					'pre code[class*="mermaid"]'
				];
				
				let processed = 0;
				selectors.forEach(selector => {
					document.querySelectorAll(selector).forEach((element, index) => {
						const graphDefinition = element.textContent.trim();
						if (graphDefinition && !element.dataset.processed) {
							const graphDiv = document.createElement('div');
							graphDiv.className = 'mermaid';
							graphDiv.id = 'mermaid-' + processed;
							graphDiv.textContent = graphDefinition;
							
							// Stocker la d√©finition originale pour le changement de th√®me
							mermaidDefinitions.set(graphDiv.id, graphDefinition);
							
							// Marque l'√©l√©ment comme trait√©
							element.dataset.processed = 'true';
							
							// Remplace le code par le div mermaid
							const parentPre = element.closest('pre');
							if (parentPre) {
								parentPre.parentNode.replaceChild(graphDiv, parentPre);
							} else {
								element.parentNode.replaceChild(graphDiv, element);
							}
							processed++;
						}
					});
				});
				
				// Initialise Mermaid apr√®s avoir cr√©√© les divs
				if (processed > 0) {
					setTimeout(() => {
						try {
							const mermaidElements = document.querySelectorAll('.mermaid');
							if (mermaidElements.length > 0) {
								mermaid.run({nodes: mermaidElements, suppressErrors: true});
							}
						} catch (error) {
							console.warn('Erreur lors de l\'initialisation Mermaid:', error);
							// En cas d'erreur, essayer de rendre individuellement
							document.querySelectorAll('.mermaid').forEach((element, index) => {
								setTimeout(() => {
									try {
										mermaid.run({nodes: [element], suppressErrors: true});
									} catch (individualError) {
										console.warn(`Erreur diagramme ${index}:`, individualError);
										// Afficher le contenu original en cas d'erreur
										element.style.whiteSpace = 'pre';
										element.style.fontFamily = 'monospace';
									}
								}, index * 200);
							});
						}
					}, 100);
				}
			}
			
			// Ajuste la taille apr√®s l'initialisation de Reveal
			Reveal.addEventListener('ready', function() {
				setTimeout(() => {
					processMermaidDiagrams();
					adjustFontSize();
					// Re-rendre MathJax apr√®s le chargement complet
					if (window.MathJax) {
						MathJax.typesetPromise();
					}
				}, 500);
			});
			
			Reveal.addEventListener('slidechanged', function() {
				setTimeout(() => {
					adjustFontSize();
					// Re-rendre MathJax lors du changement de slide
					if (window.MathJax) {
						MathJax.typesetPromise();
					}
				}, 100);
			});		</script>
	</body>
</html>